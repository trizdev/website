{"version":3,"file":"js/wphb-global.min.js","mappings":"CAEE,WACD,aAEA,IAAMA,EAAa,CAClBC,KAAI,WACHC,KAAKC,wBACLD,KAAKE,4BACLF,KAAKG,+BACLH,KAAKI,0BACLJ,KAAKK,yBACN,EASAC,WAAU,SAAEC,GACXC,OACEC,KAAM,CACNC,IAAKC,WAAWC,QAChBC,OAAQ,OACRC,KAAM,CACLC,MAAOJ,WAAWI,MAClBC,OAAQ,oBACRC,QAAS,CAAEV,MAGZW,MAAM,WACNC,SAASC,QACV,GACF,EAOAnB,sBAAqB,WAAG,IAAAoB,EAAA,KACjBC,EAAMC,SAASC,eACpB,qCAGMF,GAIPA,EAAIG,iBAAkB,SAAS,kBAC9BJ,EAAKK,KAAM,0BAA2B,GAExC,EAKAxB,0BAAyB,WACxB,IAAMoB,EAAMC,SAASI,cACpB,mDAGML,GAIPA,EAAIG,iBAAkB,SAAS,gBACzB,IAAuBG,OAAOC,WAMnCD,OAAOE,IAAIC,UACV,aACA,SACA,kBARAH,OAAOT,SAASa,KACf,gEASH,GACD,EAKA7B,6BAA4B,WAAG,IAAA8B,EAAA,KACxBX,EAAMC,SAASC,eACpB,oCAGMF,GAIPA,EAAIG,iBAAkB,SAAS,kBAC9BQ,EAAKP,KAAM,0BAA2B,GAExC,EAOAtB,wBAAuB,WAAG,IAAA8B,EAAA,KACnBZ,EAAMC,SAASI,cACpB,2CAGML,GAIPA,EAAIG,iBAAkB,SAAS,kBAC9BS,EAAKR,KAAM,8BAA+B,GAE5C,EAEAS,oBAAqB,SAACC,GACrB,IAAMC,EAAWd,SAASe,cAAc,YACxCD,EAASE,MAAQH,EAGjBC,EAASG,MAAMC,IAAM,IACrBJ,EAASG,MAAME,KAAO,IACtBL,EAASG,MAAMG,SAAW,QAE1BpB,SAASqB,KAAKC,YAAYR,GAC1BA,EAASS,QACTT,EAASU,SAET,IACCxB,SAASyB,YAAY,OACtB,CAAE,MAAOC,GACRC,QAAQC,MAAM,uBAAwBF,EACvC,CAEA1B,SAASqB,KAAKQ,YAAYf,EAC3B,EAOAhC,wBAAuB,WAAG,IAAAgD,EAAA,KACnBC,EAAa/B,SAASC,eAAgB,0BACvC8B,GACJA,EAAW7B,iBAAiB,SAAS,WACpC6B,EAAWC,UAAW,EACtBF,EAAKG,QAAQ,uCACXC,MAAK,WACL7B,OAAOT,SAASa,KAAOrB,WAAW+C,WAAa,6BAChD,GACF,IAGD,IAAMC,EAAapC,SAASC,eAAe,0BACvCmC,GACHA,EAAWlC,iBAAiB,SAAS,SAACmC,GACrCA,EAAEC,iBACFR,EAAKlB,oBAAoBP,OAAOT,SAASa,MAEzC,IAAM8B,EAAe,iCACrBH,EAAWI,UAAUC,IAAIF,GACzBG,YAAW,WACVN,EAAWI,UAAUG,OAAOJ,EAC7B,GAAG,IACJ,GAEF,EAQApC,KAAI,SAACV,GAAuB,IAAfI,IAAM+C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAClBnE,KAAKwD,QAAQxC,GACXyC,MAAK,WACDrC,GACHD,SAASC,OAAOJ,EAElB,GACF,EAEAwC,QAAO,SAACxC,GACP,OAAO,IAAIsD,SAAQ,SAAAC,GAClB,IAAMC,EAAM,IAAIC,eAChBD,EAAIE,KAAK,OAAQ/D,WAAWC,QAAU,WAAaI,EAAS,gBAAkBL,WAAWI,OACzFyD,EAAIG,OAAS,WACO,MAAfH,EAAII,QACPL,GAEF,EAEAC,EAAIK,MACL,GACD,GAGDtD,SAASE,iBAAkB,oBAAoB,WAC9C3B,EAAWC,MACZ,IAEA6B,OAAO9B,WAAaA,CACpB,CA9MC","sources":["webpack://wp-hummingbird/./_src/js/global.js"],"sourcesContent":["/* global wphbGlobal */\n\n( function() {\n\t'use strict';\n\n\tconst WPHBGlobal = {\n\t\tinit() {\n\t\t\tthis.registerClearAllCache();\n\t\t\tthis.registerClearNetworkCache();\n\t\t\tthis.registerClearCacheFromNotice();\n\t\t\tthis.registerClearCloudflare();\n\t\t\tthis.registerSafeModeActions();\n\t\t},\n\n\t\t/**\n\t\t * Clear selected module from admin bar.\n\t\t *\n\t\t * @since 3.0.1\n\t\t *\n\t\t * @param {string} module Module ID.\n\t\t */\n\t\tclearCache( module ) {\n\t\t\tjQuery\n\t\t\t\t.ajax( {\n\t\t\t\t\turl: wphbGlobal.ajaxurl,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnonce: wphbGlobal.nonce,\n\t\t\t\t\t\taction: 'wphb_clear_caches',\n\t\t\t\t\t\tmodules: [ module ],\n\t\t\t\t\t},\n\t\t\t\t} )\n\t\t\t\t.done( function() {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Clear all cache from admin bar.\n\t\t *\n\t\t * @since 3.0.1\n\t\t */\n\t\tregisterClearAllCache() {\n\t\t\tconst btn = document.getElementById(\n\t\t\t\t'wp-admin-bar-wphb-clear-all-cache'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_global_clear_cache' )\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Clear network cache.\n\t\t */\n\t\tregisterClearNetworkCache() {\n\t\t\tconst btn = document.querySelector(\n\t\t\t\t'#wp-admin-bar-wphb-clear-cache-network-wide > a'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () => {\n\t\t\t\tif ( 'undefined' === typeof window.WPHB_Admin ) {\n\t\t\t\t\twindow.location.href =\n\t\t\t\t\t\t'/wp-admin/network/admin.php?page=wphb-caching&update=open-ccnw';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twindow.SUI.openModal(\n\t\t\t\t\t'ccnw-modal',\n\t\t\t\t\t'wpbody',\n\t\t\t\t\t'ccnw-clear-now'\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Clear cache from notice regarding plugin/theme updates.\n\t\t */\n\t\tregisterClearCacheFromNotice() {\n\t\t\tconst btn = document.getElementById(\n\t\t\t\t'wp-admin-notice-wphb-clear-cache'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_global_clear_cache' )\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Clear Cloudflare browser cache.\n\t\t *\n\t\t * @since 2.7.2\n\t\t */\n\t\tregisterClearCloudflare() {\n\t\t\tconst btn = document.querySelector(\n\t\t\t\t'#wp-admin-bar-wphb-clear-cloudflare > a'\n\t\t\t);\n\n\t\t\tif ( ! btn ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.addEventListener( 'click', () =>\n\t\t\t\tthis.post( 'wphb_front_clear_cloudflare' )\n\t\t\t);\n\t\t},\n\n\t\tcopyTextToClipboard: (text) => {\n\t\t\tconst textArea = document.createElement(\"textarea\");\n\t\t\ttextArea.value = text;\n\n\t\t\t// Avoid scrolling to bottom\n\t\t\ttextArea.style.top = \"0\";\n\t\t\ttextArea.style.left = \"0\";\n\t\t\ttextArea.style.position = \"fixed\";\n\n\t\t\tdocument.body.appendChild(textArea);\n\t\t\ttextArea.focus();\n\t\t\ttextArea.select();\n\n\t\t\ttry {\n\t\t\t\tdocument.execCommand('copy');\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Oops, unable to copy', err);\n\t\t\t}\n\n\t\t\tdocument.body.removeChild(textArea);\n\t\t},\n\n\t\t/**\n\t\t * Regsiter safe mode actions.\n\t\t *\n\t\t * @since 3.4.0\n\t\t */\n\t\tregisterSafeModeActions() {\n\t\t\tconst saveButton = document.getElementById( 'wphb-ao-safe-mode-save' );\n\t\t\tif ( saveButton ) {\n\t\t\t\tsaveButton.addEventListener('click', () => {\n\t\t\t\t\tsaveButton.disabled = true;\n\t\t\t\t\tthis.request('wphb_react_minify_publish_safe_mode')\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\twindow.location.href = wphbGlobal.minify_url + '&safe_mode_status=published';\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst copyButton = document.getElementById('wphb-ao-safe-mode-copy');\n\t\t\tif (copyButton) {\n\t\t\t\tcopyButton.addEventListener('click', (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.copyTextToClipboard(window.location.href);\n\n\t\t\t\t\tconst successClass = 'wphb-ao-safe-mode-copy-success';\n\t\t\t\t\tcopyButton.classList.add(successClass);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tcopyButton.classList.remove(successClass);\n\t\t\t\t\t}, 3000);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Send AJAX request.\n\t\t *\n\t\t * @param {string}  action\n\t\t * @param {boolean} reload\n\t\t */\n\t\tpost(action, reload = true) {\n\t\t\tthis.request(action)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\tlocation.reload(action)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\trequest(action) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\t\txhr.open('POST', wphbGlobal.ajaxurl + '?action=' + action + '&_ajax_nonce=' + wphbGlobal.nonce);\n\t\t\t\txhr.onload = function () {\n\t\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\txhr.send();\n\t\t\t});\n\t\t}\n\t};\n\n\tdocument.addEventListener( 'DOMContentLoaded', function() {\n\t\tWPHBGlobal.init();\n\t} );\n\n\twindow.WPHBGlobal = WPHBGlobal;\n}() );\n"],"names":["WPHBGlobal","init","this","registerClearAllCache","registerClearNetworkCache","registerClearCacheFromNotice","registerClearCloudflare","registerSafeModeActions","clearCache","module","jQuery","ajax","url","wphbGlobal","ajaxurl","method","data","nonce","action","modules","done","location","reload","_this","btn","document","getElementById","addEventListener","post","querySelector","window","WPHB_Admin","SUI","openModal","href","_this2","_this3","copyTextToClipboard","text","textArea","createElement","value","style","top","left","position","body","appendChild","focus","select","execCommand","err","console","error","removeChild","_this4","saveButton","disabled","request","then","minify_url","copyButton","e","preventDefault","successClass","classList","add","setTimeout","remove","arguments","length","undefined","Promise","resolve","xhr","XMLHttpRequest","open","onload","status","send"],"sourceRoot":""}