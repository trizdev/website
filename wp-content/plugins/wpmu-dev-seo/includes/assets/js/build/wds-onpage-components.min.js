(()=>{"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,u=void 0,u=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"),"symbol"===e(u)?u:String(u)),i)}var o,u}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.taxonomies={}}var e,r,i;return e=t,(r=[{key:"set_id",value:function(t){return this.id=t,this}},{key:"get_id",value:function(){return this.id}},{key:"set_type",value:function(t){return this.type=t,this}},{key:"get_type",value:function(){return this.type}},{key:"set_author_id",value:function(t){return this.author_id=t,this}},{key:"get_author_id",value:function(){return this.author_id}},{key:"set_title",value:function(t){return this.title=t,this}},{key:"get_title",value:function(){return this.title}},{key:"set_content",value:function(t){return this.content=t,this}},{key:"get_content",value:function(){return this.content}},{key:"set_excerpt",value:function(t){return this.excerpt=t,this}},{key:"get_excerpt",value:function(){return this.excerpt}},{key:"set_category_ids",value:function(t){return this.set_taxonomy_terms("category",t),this}},{key:"get_category_ids",value:function(){return this.get_taxonomy_terms("category")}},{key:"set_tag_ids",value:function(t){return this.set_taxonomy_terms("post_tag",t),this}},{key:"get_tag_ids",value:function(){return this.get_taxonomy_terms("post_tag")}},{key:"set_slug",value:function(t){return this.slug=t,this}},{key:"get_slug",value:function(){return this.slug}},{key:"set_date",value:function(t){return this.date=t,this}},{key:"get_date",value:function(){return this.date}},{key:"set_modified",value:function(t){return this.modified=t,this}},{key:"get_modified",value:function(){return this.modified}},{key:"set_permalink",value:function(t){return this.permalink=t,this}},{key:"get_permalink",value:function(){return this.permalink}},{key:"set_taxonomy_terms",value:function(t,e){this.taxonomies[t]=e}},{key:"get_taxonomy_terms",value:function(t){return this.taxonomies.hasOwnProperty(t)?this.taxonomies[t]:[]}}])&&n(e.prototype,r),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,u=void 0,u=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===i(u)?u:String(u)),r)}var o,u}const u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";Array.isArray(t)||(t=[t]);var n=window["_wds_"+e]||{};return t.forEach((function(t){n=n&&n.hasOwnProperty(t)?n[t]:""})),n}},{key:"get_bool",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";return!!this.get(t,e)}}],(n=null)&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),a=jQuery;var s=t.n(a);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===l(o)?o:String(o)),r)}var i,o}const f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"truncate_string",value:function(t,e){return t.length>e&&(t=Array.from(t).splice(0,e-4).join("").trim()+" ..."),t}},{key:"normalize_whitespace",value:function(t){return(t=(t=t.replace(/(\r\n|\n|\r|\t)/gm," ")).replace(/ +/g," ")).trim()}},{key:"remove_shortcodes",value:function(t){if(-1===(t=t||"").indexOf("["))return t;var e=this;return t.replace(/\[(\[?)([a-zA-Z0-9_-]*)(?![\w-])([^\]\/]*(?:\/(?!])[^\]\/]*)*?)(?:(\/)]|](?:([^\[]*(?:\[(?!\/\2])[^\[]*)*)\[\/\2])?)(]?)/g,(function(t,n,r,i,o,a,s,l,c){if(arguments.length<7)return t||"";if("["===n&&"]"===s)return t.substring(1,t.length-1);var f=u.get("omitted_shortcodes","replacement");return a&&!f.includes(r)?e.remove_shortcodes(a.trim()):""}))}},{key:"strip_html",value:function(t){t=(t=t.toString()).replace(/(<([^>]+)>)/gi,"");var e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText||""}},{key:"process_string",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=t.strip_html(e),e=t.normalize_whitespace(e),n&&(e=t.truncate_string(e,n)),e}}],(n=null)&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===y(o)?o:String(o)),r)}var i,o}var m=function(){function t(e,n,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.is_field_valid(e)){this.$el=e,this.macroReplacementFunction=n,this.upper=r.upper||0,this.lower=r.lower||0,this.default_value=r.default_value||"";var i=.08*this.upper;this.almost_lower=this.lower+i,this.almost_upper=this.upper-i,this.init_element(e),this.init_listeners(),this.update_indicator()}}var e,n,r;return e=t,(n=[{key:"init_listeners",value:function(){var t=this;this.$el.on("input propertychange",_.debounce((function(){return t.update_indicator()}),200)).one("input propertychange",(function(){return t.add_resolving_class()}))}},{key:"is_field_valid",value:function(t){return!t.is(this.field_selector())&&t.is("input,textarea")}},{key:"init_element",value:function(t){return t.addClass(this.field_class()),s()("<div><span></span><span></span></div>").addClass(this.indicator_class()).insertAfter(t),t}},{key:"get_indicator",value:function(){return this.$el.next(this.indicator_selector())}},{key:"get_bar",value:function(){return this.get_indicator().find("span").first()}},{key:"get_char_count_container",value:function(){return this.get_indicator().find("span").last()}},{key:"reset_classes",value:function(){this.$el.removeClass("over almost-over just-right almost-under under")}},{key:"remove_resolving_class",value:function(){this.$el.removeClass("resolving")}},{key:"add_resolving_class",value:function(){this.$el.addClass("resolving")}},{key:"update_indicator",value:function(){var t=this,e=this.$el.val();if(!(e=e||this.default_value))return this.get_char_count_container().hide(),this.reset_classes(),void this.remove_resolving_class();this.macroReplacementFunction(e).then((function(e){e=f.strip_html(e),e=f.normalize_whitespace(e);var n=Array.from(e).length,r=n/((t.upper+t.lower)/2)*100;t.remove_resolving_class(),t.$el.one("input propertychange",(function(){return t.add_resolving_class()})),r=(r/=2)>100?100:r,t.get_bar().width(r+"%");var i=t.get_char_count_container();i.html(n+" / "+t.lower+"-"+t.upper+" "+u.get(["strings","characters"],"admin")),n?i.show():i.hide(),t.reset_classes(),n>t.upper?t.$el.addClass("over"):t.almost_upper<n&&n<=t.upper?t.$el.addClass("almost-over"):t.almost_lower<=n&&n<=t.almost_upper?t.$el.addClass("just-right"):t.lower<=n&&n<t.almost_lower?t.$el.addClass("almost-under"):t.lower>n&&t.$el.addClass("under")}))}},{key:"field_class",value:function(){return"wds-optimum-length-indicator-field"}},{key:"field_selector",value:function(){return"."+this.field_class()}},{key:"indicator_class",value:function(){return"wds-optimum-length-indicator"}},{key:"indicator_selector",value:function(){return"."+this.indicator_class()}}])&&p(e.prototype,n),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===v(o)?o:String(o)),r)}var i,o}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"set_id",value:function(t){return this.id=t,this}},{key:"get_id",value:function(){return this.id}},{key:"set_title",value:function(t){return this.title=t,this}},{key:"get_title",value:function(){return this.title}},{key:"set_slug",value:function(t){return this.slug=t,this}},{key:"get_slug",value:function(){return this.slug}},{key:"set_description",value:function(t){return this.description=t,this}},{key:"get_description",value:function(){return this.description}},{key:"set_taxonomy",value:function(t){return this.taxonomy=t,this}},{key:"get_taxonomy",value:function(){return this.taxonomy}},{key:"set_permalink",value:function(t){return this.permalink=t,this}},{key:"get_permalink",value:function(){return this.permalink}}])&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();!function(){window.Wds.randomPosts={},window.Wds.randomTerms={};var t=u.get("random_posts","onpage_components");Object.keys(t).forEach((function(e){var n=t[e],i=new r;i.set_id(n.ID).set_type(n.post_type).set_author_id(n.post_author).set_title(n.post_title).set_content(n.post_content).set_excerpt(n.post_excerpt).set_slug(n.post_name).set_date(new Date(n.post_date)).set_modified(new Date(n.post_modified)).set_permalink(n.permalink),n.taxonomy_terms&&Object.keys(n.taxonomy_terms).forEach((function(t){i.set_taxonomy_terms(t,n.taxonomy_terms[t])})),window.Wds.randomPosts[e]=i}));var e=u.get("random_terms","onpage_components");Object.keys(e).forEach((function(t){var n=e[t],r=new h;r.set_id(n.term_id).set_title(n.name).set_slug(n.slug).set_description(n.description).set_permalink(n.permalink).set_taxonomy(t),window.Wds.randomTerms[t]=r})),window.Wds.OptimumLengthIndicator=m,window.Wds.String_Utils=f}(jQuery)})();